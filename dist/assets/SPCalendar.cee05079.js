import{r as p,u as H,h as O,o as v,c as m,a as e,m as i,b as B,w as E,d as F,t as x,e as b,f as w,g as C,F as N,i as S,n as $,j as z,k as A,_ as T}from"./index.ba37c0c4.js";function W(M){const r=p([]),{khmerNewYearDate:D}=H();let g=D.value(M.year).days;return g.forEach((d,h)=>{let a={};h===0?a={kh:"\u1796\u17B7\u1792\u17B8\u1794\u17BB\u178E\u17D2\u1799\u1785\u17BC\u179B\u1786\u17D2\u1793\u17B6\u17C6\u1790\u17D2\u1798\u17B8 \u1794\u17D2\u179A\u1796\u17C3\u178E\u17B8\u1787\u17B6\u178F\u17B7 (\u1798\u17A0\u17B6\u179F\u1784\u17D2\u179A\u17D2\u1780\u17B6\u1793\u17D2\u178F)",en:"Khmer New Year's Day (Moha Sangkranta)"}:d===g[g.length-1]?a={kh:"\u1796\u17B7\u1792\u17B8\u1794\u17BB\u178E\u17D2\u1799\u1785\u17BC\u179B\u1786\u17D2\u1793\u17B6\u17C6\u1790\u17D2\u1798\u17B8 \u1794\u17D2\u179A\u1796\u17C3\u178E\u17B8\u1787\u17B6\u178F\u17B7 (\u179C\u17B6\u179A\u17C8\u17A1\u17BE\u1784\u179F\u17D0\u1780)",en:"Khmer New Year's Day (Veareak Laeung Sak)"}:a={kh:"\u1796\u17B7\u1792\u17B8\u1794\u17BB\u178E\u17D2\u1799\u1785\u17BC\u179B\u1786\u17D2\u1793\u17B6\u17C6\u1790\u17D2\u1798\u17B8 \u1794\u17D2\u179A\u1796\u17C3\u178E\u17B8\u1787\u17B6\u178F\u17B7 (\u179C\u17B6\u179A\u17C8\u179C\u17D0\u1793\u1794\u178F)",en:"Khmer New Year's Day (Veareak Vanabat)"},r.value.push({key:"traditional_holidays"+O(d).format("YYYY-MM-DD"),customData:{title:a,description:"Holiday in Cambodia",class:"bg-red-600 text-white"},dates:O(d).format("YYYY-MM-DD")})}),{khmerNewYearAttrs:r}}function X(M,r){return v(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})])}function q(M,r){return v(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"})])}function G(M,r){return v(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}const J={class:"p-5"},Q={class:"font-nokora w-full bg-white border mx-auto p-2 rounded-xl"},R={class:"items-center justify-between flex mb-4"},Z={class:"shrink-0 text-right text-lg font-bold"},ee={class:"text-center w-full"},te={class:"text-lg md:text-xl lg:text-2xl font-bold"},ae={class:"text-lg md:text-xl text-gray-600 font-bold"},le={class:"flex gap-1 items-center justify-between shrink-0"},ne=["onClick"],se=["onClick"],oe=["onClick"],re={class:"flex gap-2 justify-between text-center items-center mb-2 bg-white rounded-md border overflow-hidden font-bold text-lg"},ue={class:"grid gap-2 grid-cols-7"},ie=["onClick"],de={class:"flex lg:gap-1 flex-col items-center md:flex-row md:items-start"},ce={class:"text-lg md:text-3xl font-bold shrink-0"},he={class:"w-full flex justify-center flex-col md:justify-start items-center md:items-end font-nokora text-sm md:text-base text-center"},ve={key:0,class:"text-blue-600 hidden md:block"},me={__name:"TheCalendar",props:{attributes:Object,currentKhmerMonths:String},emits:["onPrev","onNext","onUpdatePage","onClick"],setup(M,{emit:r}){const D=M,{khmerDate:g}=H(),d=p([]),h=p([]),a=p(i().month()+1),c=p(i().year()),_=B(()=>i(c.value+"-"+a.value+"-1","YYYY-M-D")),y=B(()=>g.value(_.value.clone()).toKhDate("\u1786\u17D2\u1793\u17B6\u17C6a_e_\u1796.\u179F b").split("_")),K=()=>{a.value--,a.value===0&&(a.value=12,c.value--),r("onPrev",{month:a.value,year:c.value}),r("onUpdatePage",{month:a.value,year:c.value})},L=()=>{a.value++,a.value===13&&(a.value=1,c.value++),r("onNext",{month:a.value,year:c.value}),r("onUpdatePage",{month:a.value,year:c.value})},P=()=>{a.value=i().month()+1,c.value=i().year()},n=s=>{r("onClick",s)};E(_,()=>{h.value.length=0,f()}),F(()=>{h.value.length=0,f()});const f=()=>{r("onPrev",{month:a.value,year:c.value}),r("onNext",{month:a.value,year:c.value}),r("onUpdatePage",{month:a.value,year:c.value}),d.value.length=0;for(let u=0;u<7;u++)d.value.push({km:i().locale("km").day(u)});let s=_.value,o=s.clone().daysInMonth(),l=s.day(),U=7-i(s.format("YYYY-MM-"+o)).day()-1,V=s.clone().subtract(1,"months").daysInMonth();for(let u=l;u>0;u--){let k=V-u+1,I=i(s.clone().subtract(1,"months").format("YYYY-MM-"+k),"YYYY-MM-D");h.value.push({prevMonth:!0,day:k,date:I,khDate:g.value(I),nextMonth:!1,attributes:t(I)})}for(let u=1;u<=o;u++){let k=i(s.format("YYYY-MM-"+u),"YYYY-MM-D");h.value.push({prevMonth:!1,day:u,date:k,khDate:g.value(k),nextMonth:!1,attributes:t(k)})}for(let u=1;u<=U;u++){let k=i(s.clone().add(1,"months").format("YYYY-MM-"+u),"YYYY-MM-D");h.value.push({prevMonth:!1,day:u,date:k,khDate:g.value(k),nextMonth:!0,attributes:t(k)})}},t=s=>D.attributes.filter(o=>s.isSame(o.dates)),Y=s=>{let o=Object.assign([],s);return o.length?o.filter(l=>l.customData.description==="Holiday in Cambodia").length?"text-red-600 bg-red-100":"text-blue-600 bg-blue-100":"bg-white"};return(s,o)=>(v(),m("div",J,[e("div",Q,[e("div",R,[e("div",Z,[e("div",null,x(b(y)[0]),1),e("div",null,x(b(y)[1]),1),e("div",null,x(b(y)[2]),1)]),e("div",ee,[e("h2",te,x(M.currentKhmerMonths),1),e("h2",ae,x(b(_).format("MMMM, YYYY")),1)]),e("div",le,[e("button",{type:"button",class:"rounded-md hover:bg-gray-200 p-2",onClick:w(K,["prevent"])},[C(b(X),{class:"w-5 h-5"})],8,ne),e("button",{type:"button",class:"rounded-full w-3 h-3 bg-gray-200 hover:bg-gray-300",onClick:w(P,["prevent"])},null,8,se),e("button",{type:"button",class:"rounded-md hover:bg-gray-200 p-2",onClick:w(L,["prevent"])},[C(b(q),{class:"w-5 h-5"})],8,oe)])]),e("div",re,[(v(!0),m(N,null,S(d.value,(l,j)=>(v(),m("div",{key:l,class:$([j===0?"text-red-600":"","w-full py-3"])},[e("div",null,x(l.km.format("dddd")),1)],2))),128))]),e("div",ue,[(v(!0),m(N,null,S(h.value,l=>(v(),m("div",{key:l,onClick:w(j=>n(l.date),["prevent"]),class:$(["w-full aspect-[10/8] shadow rounded-md border md:p-2 whitespace-nowrap cursor-pointer transform duration-150 hover:scale-105 ease-in-out",[l.prevMonth||l.nextMonth?"opacity-20 bg-gray-100":"bg-white",Y(l.attributes),l.date.weekday()===0?"text-red-600":"",b(i)().isSame(l.date,"day")?"bg-blue-600 text-white":""]])},[e("div",de,[e("div",ce,x(l.day),1),e("div",he,[e("div",null,x(l.khDate.toKhDate("d N")),1)])]),(l.khDate.khDay()===0||l.day===1)&&l.nextMonth===!1?(v(),m("div",ve,x(l.khDate.toKhDate("m")),1)):z("",!0)],10,ie))),128))])])]))}},fe={class:"flex-col-reverse lg:flex flex-col lg:flex-row gap-4 mx-auto"},xe={class:"w-full lg:w-2/3 shrink-0"},_e={class:"w-full"},ge={class:"relative max-w-4xl max-h-screen h-full md:h-auto pointer-events-auto w-full"},pe={class:"border-2 border-white rounded-xl overflow-hidden relative p-4 bg-white w-full font-nokora md:text-lg lg:text-2xl"},ke={class:"text-lg md:text-xl lg:text-2xl font-bold"},be={class:"mt-4"},ye={key:0,class:"list-outside list-disc pl-3 mt-3"},Me={__name:"SPCalendar",setup(M){const{khmerDate:r}=H(),{events:D,traditional_events:g}=A(),d=p([{key:1,customData:{title:{kh:"\u1790\u17D2\u1784\u17C3",en:"today"},class:"bg-blue-600 text-white"},dates:i().format()}]),h=p([]),a=p([1,2]),c=p({}),_=p({}),y=p(!1),K=n=>{c.value={m:n.month,y:n.year},h.value.length=0,d.value.length=0,P(n),d.value.sort(function(f,t){return new Date(f.dates)-new Date(t.dates)})},L=n=>{y.value=!0,_.value={date:n,attributes:d.value.filter(f=>n.isSame(f.dates,"day"))}},P=n=>{if(n.month===4){const{khmerNewYearAttrs:t}=W(n);d.value.push(...t.value)}D.value.filter(t=>t.start_date.month===n.month).forEach(t=>{d.value.push({key:"events"+i({y:n.year,M:n.month-1,D:t.start_date.day}).format("YYYY-MM-DD"),customData:{title:t.summary,description:t.description,class:"bg-red-600 text-white"},dates:i({y:n.year,M:n.month-1,D:t.start_date.day}).format("YYYY-MM-DD")})});let f=i({y:n.year,M:n.month-1}).daysInMonth();for(let t=1;t<=f;t++){let Y=i({y:n.year,M:n.month-1,D:t}).format("YYYY-MM-DD"),s=r.value(Y);h.value.push({khmer_month:s.toKhDate("m"),khmer_day:s.toKhDate("dN"),date:Y}),g.value.filter(o=>h.value.filter(l=>l.khmer_month===o.start_date.month&&l.khmer_day===o.start_date.day).includes(o))}h.value.reduce(function(t,Y){let s=g.value.filter(o=>o.start_date.month===Y.khmer_month&&o.start_date.day===Y.khmer_day);s.length&&s.forEach(o=>{d.value.push({key:"traditional_events"+Y.date,customData:{title:o.summary,description:o.description,class:"bg-red-600 text-white"},dates:Y.date})})}),a.value=[...new Set(h.value.map(t=>t.khmer_month))]};return(n,f)=>(v(),m(N,null,[e("div",fe,[e("div",xe,[C(me,{attributes:d.value,onOnUpdatePage:K,onOnClick:L,"current-khmer-months":a.value[0]+" ~ "+a.value[1]},null,8,["attributes","current-khmer-months"])]),e("div",_e,[C(T,{title:"\u1796\u17D2\u179A\u17B9\u178F\u17D2\u178F\u17B7\u1780\u17B6\u179A\u178E\u17CD\u1794\u17D2\u179A\u1785\u17B6\u17C6 \u1781\u17C2"+b(i)({M:c.value.m-1,y:c.value.y}).locale("km").format("MMMM \u1786\u17D2\u1793\u17B6\u17C6YYYY"),events:d.value},null,8,["title","events"])])]),e("div",{class:$(y.value?"fixed bg-black/50  z-10 inset-0 ":"hidden"),onClick:f[0]||(f[0]=w(t=>y.value=!1,["prevent"]))},null,2),e("div",{tabindex:"-1","aria-hidden":"true",class:$([y.value?"fixed":"hidden"," inset-0 z-50 flex items-center justify-center pointer-events-none"])},[e("div",ge,[e("button",{type:"button",onClick:f[1]||(f[1]=w(t=>y.value=!1,["prevent"])),class:"absolute -top-2 -right-2 w-6 h-6 grid place-content-center rounded-full bg-white z-30 text-red-600"},[C(b(G),{class:"h-5"})]),e("div",pe,[_.value.date?(v(),m(N,{key:0},[e("h4",ke,x(_.value.date.clone().locale("km").format("LL"))+", "+x(_.value.date.clone().format("LL")),1),e("p",be,x(b(r)(_.value.date).toLunarDate()),1),_.value.attributes?(v(),m("ul",ye,[(v(!0),m(N,null,S(_.value.attributes,t=>(v(),m("li",{key:t.key,class:$(t.customData.description==="Holiday in Cambodia"?"text-red-600":"")},x(t.customData.title.kh),3))),128))])):z("",!0)],64)):z("",!0)])])],2)],64))}};export{Me as default};
